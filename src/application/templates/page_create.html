{% extends "base.html" %}
{% block page_list %} class="active"{% endblock page_list %}

{% block style_block %}
    <style type="text/css">
        table.table { width: 60%; }
    </style>
{% endblock %}

{% block content %}
    <h1 id="">Add a New Page</h1>
    <hr>

    <form id="new-page-form" class="well" action="{{ url_for('page_create') }}" method="post" accept-charset="utf-8" style="width:100%;">
        <fieldset>
{#            {{ form.csrf_token }}#}
            {{ form.hidden_tag() }}
            <div class="control-group">
                <div class="control-label">{{ form.page_name.label }}</div>
                <div class="controls">
                    {{ form.page_name( **{'class':'form-control'})|safe }}
                    {% if form.page_name.errors %}
                    <ul class="errors">
                        {% for error in form.page_name.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </div>
            </div>
            <div>&nbsp;</div>
            <div class="control-group">
                <div class="control-label">{{ form.url_name.label }} ( 인터넷 페이지 주소 e.g., http://math.unist.ac.kr/url_name )</div>
                <div class="controls">
                    {{ form.url_name( **{'class':'form-control'})|safe }}
                    {% if form.url_name.errors %}
                    <ul class="errors">
                        {% for error in form.url_name.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </div>
            </div>
            <div>&nbsp;</div>
            <div class="control-group">
                <div class="control-label">{{ form.page_content.label }}</div>
                <div class="controls">
                    {{ form.page_content( **{'data-provide':'markdown', 'rows':'12'})|safe }}
                    {% if form.page_content.errors %}
                    <ul class="errors">
                        {% for error in form.page_content.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </div>
            </div>
            <div>&nbsp;</div>
            <div class="control-group">
                <div class="controls">
                    <input class="btn btn-primary" type="submit" value="Add page"/>
                    <a class="btn" href="{{  url_for('page_list') }}">Cancel</a>
                </div>
            </div>
        </fieldset>
    </form>

{% endblock content %}

{% block footer %}
{#    {% include 'new_example.html' %} {# pull in new_page form (modal dialog) #}
{% endblock footer %}

{% block tail_script %}
    <script src="/static/js/bootstrap-markdown.js"></script>
    <script src="http://www.codingdrama.com/bootstrap-markdown/js/markdown.js" rel="stylesheet"></script>
{#    <script>#}
{#        var FormHelpers = {#}
{#            validate: function (form, evt) {#}
{#                // Form validation for modal dialog#}
{#                var page_name = form.find('#page_name').val();#}
{#                var page_description = form.find('#page_description').val();#}
{#                if (!(page_name)) {#}
{#                    evt.preventDefault();#}
{#                    Utils.renderFieldErrorTooltip('#page_name', 'Name is required', 'right');#}
{#                }#}
{#                if (!(page_description)) {#}
{#                    evt.preventDefault();#}
{#                    Utils.renderFieldErrorTooltip('#page_description', 'Description is required', 'right');#}
{#                }#}
{#            },#}
{#            init: function () {#}
{#                var self = this;#}
{#                var page_form = $('#new-page-form');#}
{#                page_form.on('submit', function (evt) {#}
{#                    self.validate(page_form, evt)#}
{#                });#}
{#            }#}
{#        };#}
{#        $(document).ready(function() {#}
{#            FormHelpers.init();#}
{#        });#}
{#    </script>#}
{% endblock tail_script %}


